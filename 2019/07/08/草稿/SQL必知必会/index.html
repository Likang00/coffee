<!DOCTYPE html>
<html lang="en">

<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8">
	<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
	
	<!-- title -->
	
	<title>
	
		SQL必知必会 | 
	 
	coffee
	</title>
	
	<!-- keywords,description -->
	 

	<!-- favicon -->
	
	<link rel="shortcut icon" href="/coffee/favicon.ico">
	
  

	
<link rel="stylesheet" href="/coffee/css/main.css">

	
<link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.min.css">

	
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.17.1/build/styles/darcula.min.css">


	
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.17.1/build/highlight.min.js"></script>

	
<script src="https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js"></script>

	
<script src="https://cdn.jsdelivr.net/npm/jquery-pjax@2.0.1/jquery.pjax.min.js"></script>

	
<script src="/coffee/js/main.js"></script>

	
		
<script src="https://cdn.jsdelivr.net/npm/leancloud-storage/dist/av-min.js"></script>

		
<script src="https://cdn.jsdelivr.net/npm/valine@1.3.10/dist/Valine.min.js"></script>

	
	
<meta name="generator" content="Hexo 4.2.1"></head>

<body>
	<header id="header">
    <a id="title" href="/coffee/" class="logo">
        coffee
    </a>

    <ul id="menu">
        <li class="menu-item">
            <a href="/coffee/about" class="menu-item-link">ABOUT</a>
        </li>

        <!-- <li class="menu-item">
			<a href="https://github.com/wujun234/uid-generator-spring-boot-starter" class="menu-item-link" target="_blank">
				UidGenerator
			</a>
		</li> -->

        <li class="menu-item">
            <a href="https://github.com/likang00" class="menu-item-link" target="_blank">
                <i class="fa fa-github fa-2x"></i>
            </a>
        </li>
    </ul>
</header>
	
<div id="sidebar">
	<button id="sidebar-toggle" class="toggle" ><i class="fa fa-arrow-right " aria-hidden="true"></i></button>
	
	<div id="site-toc">
		<input id="search-input" class="search-input" type="text" placeholder="search...">
		<div id="tree">
			

			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										01计算机组成原理
									</a>
									
							<ul>
								<li class="file">
									<a href="/coffee/2020/06/10/01%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/%E6%A6%82%E8%AE%BA/">
										概论
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										09HEXO
									</a>
									
							<ul>
								<li class="file">
									<a href="/coffee/2020/06/11/09HEXO/hexo%E4%B8%BB%E9%A2%98%E6%8E%A8%E8%8D%90/">
										hexo主题推荐
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										草稿
									</a>
									
							<ul>
								<li class="file">
									<a href="/coffee/2019/01/18/%E8%8D%89%E7%A8%BF/Docker%E7%AC%94%E8%AE%B01/">
										Docker笔记1
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/coffee/2019/02/21/%E8%8D%89%E7%A8%BF/Docker%E7%AC%94%E8%AE%B02/">
										Docker笔记2
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/coffee/2018/11/24/%E8%8D%89%E7%A8%BF/MongoDB%E5%9F%BA%E7%A1%80/">
										MongoDB基础
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/coffee/2018/12/27/%E8%8D%89%E7%A8%BF/MongoDB%E8%81%9A%E5%90%88/">
										MongoDB聚合
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/coffee/2019/04/01/%E8%8D%89%E7%A8%BF/Python-pymongo/">
										Python-pymongo
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/coffee/2019/02/28/%E8%8D%89%E7%A8%BF/Python-pymysql/">
										Python-pymysql
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/coffee/2019/07/11/%E8%8D%89%E7%A8%BF/Python-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/">
										Python-正则表达式
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file active">
									<a href="/coffee/2019/07/08/%E8%8D%89%E7%A8%BF/SQL%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A/">
										SQL必知必会
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/coffee/2018/12/31/%E8%8D%89%E7%A8%BF/Win10%E5%AD%90%E7%B3%BB%E7%BB%9FWSL/">
										Win10子系统WSL
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/coffee/2020/06/10/%E8%8D%89%E7%A8%BF/hello-world/">
										hello-world
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/coffee/2020/06/10/%E8%8D%89%E7%A8%BF/%E5%88%97%E8%A1%A8%E6%8E%A8%E5%AF%BC%E5%BC%8F/">
										列表推导式
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
		</div>
	</div>
</div>

	<!-- 引入正文 -->
	<div id="content">
		<h1 id="article-title">
    
        SQL必知必会
</h1>
<div class="article-meta">
    
            <span>Likang</span>
            <span>2019-07-08 10:43:53</span>
            
                <div id="article-categories">
                    
                </div>
                
</div>

<div id="article-content">
    <h1 id="MySQL-必知必会"><a href="#MySQL-必知必会" class="headerlink" title="MySQL 必知必会"></a>MySQL 必知必会</h1><h2 id="命令行登录mysql"><a href="#命令行登录mysql" class="headerlink" title="命令行登录mysql"></a>命令行登录mysql</h2><p>添加mysql.exe所在路径到系统环境变量</p>
<p>-h : 指定客户端所要登录的 MySQL 主机名, 登录本机(localhost 或 127.0.0.1)该参数可以省略;<br>-P : 端口号(大写)<br>-u : 登录的用户名;<br>-p : 告诉服务器将会使用一个密码来登录, 如果所要登录的用户名密码为空, 可以忽略此选项。</p>
<p><em>本地</em><br><code>mysql -u root -p</code></p>
<p><em>腾讯云mysql</em><br><code>mysql -h cdb-a5oi3xsc.bj.tencentcdb.com -P 10087 -u root -p</code></p>
<h2 id="了解数据库和表"><a href="#了解数据库和表" class="headerlink" title="了解数据库和表"></a>了解数据库和表</h2><pre><code class="sql">-- 获取数据库和表信息
SHOW DATABASES;
USE likang;
SHOW TABLES;
SHOW COLUMNS FROM customers;
DESCRIBE customers; -- 同上
SHOW STATUS;
SHOW CREATE TABLE customers;
SHOW GRANTS;</code></pre>
<h2 id="检索数据"><a href="#检索数据" class="headerlink" title="检索数据"></a>检索数据</h2><pre><code class="sql">-- 检索单个列 
select columnName from tableName;
-- 检索多个列 
select columnName1, columnName2 ... from tableName;
-- 检索所有列 
select * from tableName;
-- 检索不同的行 
select distinct from tableName;
-- 限制结果 
select * from tableName limit 5;
-- 使用完全限定的表名
select tableName.columnName from tableName;</code></pre>
<h2 id="排序检索数据"><a href="#排序检索数据" class="headerlink" title="排序检索数据"></a>排序检索数据</h2><pre><code class="sql">-- 排序数据 (用非检索的列排序数据是完全合法的)
select columnName from tableName order by columnName;
-- 按多个列排序
select columnName1, columnName2 from tableName order by columnName1, columnName2;
-- 指定排序方向 (若不指定 则默认为升序asc)
select columnName from tableName order by columnName desc;</code></pre>
<h2 id="过滤数据"><a href="#过滤数据" class="headerlink" title="过滤数据"></a>过滤数据</h2><pre><code class="sql">-- where 子句
select columnName from tableName where columnName = &#39;xxx&#39;;
-- where 子句操作符
= &lt;&gt; != &lt; &lt;= &gt; &gt;= between </code></pre>
<h2 id="数据过滤"><a href="#数据过滤" class="headerlink" title="数据过滤"></a>数据过滤</h2><pre><code class="sql">-- 组合where子句
and or 计算次序 in not</code></pre>
<h2 id="用通配符进行过滤"><a href="#用通配符进行过滤" class="headerlink" title="用通配符进行过滤"></a>用通配符进行过滤</h2><pre><code class="sql">-- LIKE操作符
-- % 表示 任何字符出现任意次数
select * from tableName where column like &#39;xxx%&#39;;
-- _表示 任何字符出现一次
select * from tableName where column like &#39;xxx_&#39;;</code></pre>
<h2 id="用正则表达式进行搜素"><a href="#用正则表达式进行搜素" class="headerlink" title="用正则表达式进行搜素"></a>用正则表达式进行搜素</h2><pre><code class="sql">select * from tableName where column regexp &#39;xxx&#39;;</code></pre>
<h2 id="计算字段"><a href="#计算字段" class="headerlink" title="计算字段"></a>计算字段</h2><pre><code class="sql">-- 拼接
concat()
-- 算数
+ - * /</code></pre>
<h2 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h2><p>可移植性不强 几乎每个DBMS都支持特有的函数<br>大体分为四类<br>1.字符串处理函数<br>2.日期时间函数<br>3.数值处理函数<br>4.自定义函数</p>
<h2 id="汇总数据"><a href="#汇总数据" class="headerlink" title="汇总数据"></a>汇总数据</h2><p><strong>聚集函数</strong></p>
<pre><code class="sql">-- MySQL聚集函数
AVG() 平均
COUNT() 行数
MAX() 最大
MIN() 最小
SUM() 求和
-- 聚集不同的值
select AVG(DISTINCT prod_pric) as avg_price
from products where vend_id = 1003;</code></pre>
<h2 id="分组数据"><a href="#分组数据" class="headerlink" title="分组数据"></a>分组数据</h2><p>过滤分组使用 <em>HAVING</em></p>
<pre><code class="sql">-- HAVING 过滤分组
SELECT cust_id, COUNT(*) AS orders
FROM orders 
GROUP BY cust_id
HAVING COUNT(*) &gt;= 2;
-- 列出具有2个及以上、价格为10及以上的产品的供应商
SELECT vend_id, COUNT(*) AS num_prods
FROM products
WHERE prod_price &gt;= 10
GROUP BY vend_id
HAVING COUNT(*) &gt;= 2;
-- where 在数据分组前进行过滤
-- having 在数据分组后进行过滤</code></pre>
<h2 id="子查询"><a href="#子查询" class="headerlink" title="子查询"></a>子查询</h2><h2 id="联结表"><a href="#联结表" class="headerlink" title="联结表"></a>联结表</h2><pre><code class="sql">-- 没有联结条件的表关系 返回的结果为笛卡尔积 行数将为第一张表的行数*第二张表的行数
-- 内部联结
/* 用三种方法实现 */

select cust_name, cust_contact
from customers
where cust_id in (
    select cust_id
    from orders
    where order_num in (
        select order_num
        from orderitems
        where prod_id = &#39;TNT2&#39;
        )
);

SELECT c.cust_name, c.cust_contact
FROM customers AS c, orders AS o, orderitems AS i
WHERE c.cust_id = o.cust_id
AND i.order_num = o.order_num
AND i.prod_id = &#39;TNT2&#39;;

select c.cust_name, c.cust_contact
from customers as c
inner join orders as o on c.cust_id = o.cust_id
inner join orderitems as i on o.order_num = i.order_num
where i.prod_id = &#39;TNT2&#39;;

-- 自联结
select p1.prod_id, p1.prod_name
from products as p1, products as p2
where p1.vend_id = p2.vend_id
and p2.prod_id = &#39;DTNTR&#39;;

-- 使用带聚集函数的联结
select c.cust_id, c.cust_name, count(o.order_num) as num_ord
from customers as c
left join orders as o
on c.cust_id = o.cust_id
group by c.cust_id
order by num_ord;</code></pre>
<h2 id="组合查询"><a href="#组合查询" class="headerlink" title="组合查询"></a>组合查询</h2><p><strong>UNION</strong></p>
<pre><code class="sql">-- 默认取消重复的行
-- 若要包含 使用 union all
-- 对组合查询进行排序
select vend_id, prod_id, prod_price
from products
where prod_price &lt;= 5
union 
select vend_id, prod_id, prod_price
from products
where vend_id in (1001,1002)
order by vend_id, prod_price;</code></pre>
<h2 id="全文检索"><a href="#全文检索" class="headerlink" title="全文检索"></a>全文检索</h2><pre><code class="sql">CREATE TABLE `productnotes` (
  `note_id` int(11) NOT NULL AUTO_INCREMENT,
  `prod_id` char(10) COLLATE utf8_bin NOT NULL,
  `note_date` datetime NOT NULL,
  `note_text` text COLLATE utf8_bin,
  PRIMARY KEY (`note_id`),
  FULLTEXT KEY `note_text` (`note_text`)
) ENGINE=InnoDB AUTO_INCREMENT=115 DEFAULT CHARSET=utf8 COLLATE=utf8_bin</code></pre>
<h2 id="存储过程"><a href="#存储过程" class="headerlink" title="存储过程"></a>存储过程</h2><pre><code class="sql"></code></pre>
<h2 id="游标"><a href="#游标" class="headerlink" title="游标"></a>游标</h2><p>MySQL游标只能用于存储过程(和函数)<br>使用游标设计到的几个步骤: 声明游标 打开游标 检索数据 关闭游标</p>
<h1 id="MySQL数据类型"><a href="#MySQL数据类型" class="headerlink" title="MySQL数据类型"></a>MySQL数据类型</h1><h2 id="串数据类型"><a href="#串数据类型" class="headerlink" title="串数据类型"></a>串数据类型</h2><table>
<thead>
<tr>
<th align="center">数据类型</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">CHAR</td>
<td align="center">1~255个字符的定长串</td>
</tr>
<tr>
<td align="center">VARCHAR</td>
<td align="center">长度可变 最多不超过255字节</td>
</tr>
<tr>
<td align="center">ENUM</td>
<td align="center">接受最多64K个串组成的一个预定义集合的某个串</td>
</tr>
<tr>
<td align="center">SET</td>
<td align="center">接受最多64K个串组成的一个预定义集合的零个或多个串</td>
</tr>
<tr>
<td align="center">TEXT</td>
<td align="center">最大长度为64K的长文本</td>
</tr>
<tr>
<td align="center">MEDIUMTEXT</td>
<td align="center">最大长度16K</td>
</tr>
<tr>
<td align="center">TINYTEXT</td>
<td align="center">最大长度255字节</td>
</tr>
<tr>
<td align="center">LONGTEXT</td>
<td align="center">最大长度4GB</td>
</tr>
</tbody></table>
<h2 id="数值数据类型"><a href="#数值数据类型" class="headerlink" title="数值数据类型"></a>数值数据类型</h2><table>
<thead>
<tr>
<th align="center">数据类型</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">BIT</td>
<td align="center">位字段，1～64位。</td>
</tr>
<tr>
<td align="center">BIGINT</td>
<td align="center">整数值，支持-9223372036854775808～9223372036854775807的数</td>
</tr>
<tr>
<td align="center">BOOLEAN</td>
<td align="center">（或BOOL） 布尔标志，或者为0或者为1，主要用于开/关（on/off）标志</td>
</tr>
<tr>
<td align="center">DECIMAL</td>
<td align="center">（或DEC） 精度可变的浮点值</td>
</tr>
<tr>
<td align="center">DOUBLE</td>
<td align="center">双精度浮点值</td>
</tr>
<tr>
<td align="center">FLOAT</td>
<td align="center">单精度浮点值</td>
</tr>
<tr>
<td align="center">INT</td>
<td align="center">（或INTEGER） 整数值，支持-2147483648～2147483647的数</td>
</tr>
<tr>
<td align="center">MEDIUMINT</td>
<td align="center">整数值，支持-8388608～8388607（如果是UNSIGNED，为0～ 16777215）的数</td>
</tr>
<tr>
<td align="center">REAL</td>
<td align="center">4字节的浮点值</td>
</tr>
<tr>
<td align="center">SMALLINT</td>
<td align="center">整数值，支持-32768～32767（如果是UNSIGNED，为0～ 65535）的数</td>
</tr>
<tr>
<td align="center">TINYINT</td>
<td align="center">整数值，支持-128～127（如果为UNSIGNED，为0～255）的数</td>
</tr>
</tbody></table>
<h2 id="日期时间类型"><a href="#日期时间类型" class="headerlink" title="日期时间类型"></a>日期时间类型</h2><table>
<thead>
<tr>
<th align="center">数据类型</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">DATE</td>
<td align="center">表示1000-01-01～9999-12-31的日期，格式为 YYYY-MM-DD</td>
</tr>
<tr>
<td align="center">DATETIME</td>
<td align="center">DATE和TIME的组合 TIMESTAMP 功能和DATETIME相同（但范围较小）</td>
</tr>
<tr>
<td align="center">TIME</td>
<td align="center">格式为HH:MM:SS</td>
</tr>
<tr>
<td align="center">YEAR</td>
<td align="center">用2位数字表示，范围是70（1970年）～69（2069 年），用4位数字表示，范围是1901年～2155年 D</td>
</tr>
</tbody></table>
<h2 id="二进制数据类型"><a href="#二进制数据类型" class="headerlink" title="二进制数据类型"></a>二进制数据类型</h2><table>
<thead>
<tr>
<th align="center">数据类型</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">BLOB</td>
<td align="center">Blob最大长度为64 KB</td>
</tr>
<tr>
<td align="center">MEDIUMBLOB</td>
<td align="center">Blob最大长度为16 MB</td>
</tr>
<tr>
<td align="center">LONGBLOB</td>
<td align="center">Blob最大长度为4 GB</td>
</tr>
<tr>
<td align="center">TINYBLOB</td>
<td align="center">Blob最大长度为255字节</td>
</tr>
</tbody></table>

</div>


    <div class="post-guide">
        <div class="item left">
            
                <a href="/coffee/2019/07/11/%E8%8D%89%E7%A8%BF/Python-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/">
                    <i class="fa fa-angle-left" aria-hidden="true"></i>
                    Python-正则表达式
                </a>
                
        </div>
        <div class="item right">
            
                <a href="/coffee/2019/04/01/%E8%8D%89%E7%A8%BF/Python-pymongo/">
                    Python-pymongo
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                </a>
                
        </div>
    </div>
    

        

                <script>
                    
                    
                </script>
	</div>
	<div id="footer">
	<p>
	©2019-<span id="footerYear"></span> 
	<a href="/">Likang</a> 
	
	
	<br>
	Theme <a href="//github.com/wujun234/hexo-theme-tree" target="_blank">Tree</a>
	by <a href="//github.com/wujun234" target="_blank">WuJun</a>
	Powered by <a href="//hexo.io" target="_blank">Hexo</a>
	</p>
</div>
<script type="text/javascript"> 
	document.getElementById('footerYear').innerHTML = new Date().getFullYear() + '';
</script>
	<button id="totop-toggle" class="toggle"><i class="fa fa-angle-double-up" aria-hidden="true"></i></button>
</body>
</html>